<div class="view violation-view">
  <div class="header rel">
    <h2>{{ model.violation.label }}</h2>
    <div class="fs0 abs abs-right toolbar">
      <div class="ib">
        <h3 class="mid-grey">domains</h3>
        <p class="grey">{{ model.violation.domainsCount }}</p>
      </div>
      <div class="ib">
        <h3 class="mid-grey">pages</h3>
        <p class="grey">{{ model.violation.pageCount | number }}</p>
      </div>
    </div>
  </div>

  <div class="domains">
    <ul nodata="model.violation.domains">
      <li class="fs0" ng-repeat="domain in model.violation.domains track by domain.name">
        <h3 class="grey ib">{{ domain.name }}</h3>
        <p class="ib"><horizontal percentage="domain.percentage" value="domain.value"></horizontal></p>
      </li>
    </ul>
  </div>

  <div class="reviews" ng-show="model.violation.reviews">
    <div class="page-reviews-container">
      <div class="header rel light-grey-border">
        <div class="title ib">Reviews with this violation</div>
        <div class="search fs0 abs">
          <span class="directory ib rel"><input type="text" ng-model="model.pageFilter" placeholder="enter a directory to filter reviews..." /><i></i></span>
        </div>
      </div>
      <div class="data">
        <table>
          <thead>
            <tr><th class="url">URL</th>
            <th class="finished-at center">Finished at</th>
          </tr></thead>
          <tbody>
            <tr ng-repeat="review in model.violation.reviews" class="ng-scope">
              <td class="url"><a href="#/page/{{review.page.uuid}}/review/{{review.uuid}}">{{review.page.url}}</a></td>
              <td class="finished-at center"><span am-time-ago="review.page.completedAt * 1000"></span> ago</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

  <pager
    pagecount="model.reviewsCount"
    current="model.currentPage"
    pagesize="10"
    pagechange="model.updateReviews"
    ng-show="model.violation.pageCount > 10"
  ></page>

  </div>
</div>
